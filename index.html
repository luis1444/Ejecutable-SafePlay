<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Monitor de Juegos</title>

  <style>
    :root{
      --sky-50:#f0f9ff; --sky-100:#e0f2fe; --sky-200:#bae6fd; --sky-300:#7dd3fc;
      --sky-400:#38bdf8; --sky-500:#0ea5e9; --sky-600:#0284c7; --sky-700:#0369a1;
      --ink:#2c3e50; --muted:#5a6c7d; --success:#22c55e; --danger:#ef4444; --warning:#f59e0b;
      --glass: rgba(255,255,255,.85); --radius:16px; --shadow:0 10px 30px rgba(2,132,199,.18); --shadow-lg:0 20px 50px rgba(2,132,199,.28);
    }

    *{margin:0;padding:0;box-sizing:border-box}
    html,body{height:100%}
    body{
      font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      line-height:1.6; color:var(--ink);
      background: linear-gradient(135deg, #87CEEB 0%, #ffffff 100%);
      overflow-x:hidden;
      padding: 96px 0 48px;
    }
    .container{max-width:1200px;margin:0 auto;padding:0 20px}

    /* Header */
    header{
      position:fixed; inset:0 0 auto 0; z-index:1000;
      background: rgba(255,255,255,.9);
      backdrop-filter: blur(10px);
      box-shadow: 0 2px 20px rgba(135,206,235,.3);
    }
    nav{display:flex;align-items:center;justify-content:space-between;padding:16px 20px}
    .logo{display:flex; gap:10px; align-items:center}
    .nav-actions{display:flex;gap:.5rem;align-items:center}
    .chip{
      font-size:.9rem; padding:6px 12px; border-radius:999px;
      background:linear-gradient(45deg, var(--sky-200), var(--sky-100));
      border:1px solid var(--sky-300); color:var(--sky-700)
    }

    .account-btn{
      border:none; background:#fff; border:1px solid var(--sky-300);
      padding:6px 12px; border-radius:999px; font-weight:700; cursor:pointer;
      transition:.2s ease; display:inline-flex; align-items:center; gap:8px;
    }
    .account-btn:hover{background:#f8fbff}
    .account-avatar{
      width:22px; height:22px; border-radius:50%; display:inline-grid; place-items:center;
      background:linear-gradient(135deg, var(--sky-300), var(--sky-100)); font-size:.85rem; font-weight:900; color:#0b3f59
    }

    /* Drawer (barra lateral derecha) */
    .drawer-overlay{
      position:fixed; inset:0; background:rgba(0,0,0,.35); backdrop-filter: blur(2px);
      opacity:0; pointer-events:none; transition:.2s ease; z-index:1200;
    }
    .drawer-overlay.open{opacity:1; pointer-events:auto}
    .drawer{
      position:fixed; top:0; right:0; height:100vh; width:min(360px, 92vw);
      background:#fff; border-left:1px solid var(--sky-200); box-shadow: -20px 0 60px rgba(3,105,161,.18);
      transform: translateX(100%); transition: transform .25s ease; z-index:1210; display:flex; flex-direction:column;
    }
    .drawer.open{ transform: translateX(0); }
    .drawer-head{
      padding:16px 16px; border-bottom:1px solid var(--sky-200);
      display:flex; align-items:center; justify-content:space-between;
    }
    .drawer-title{font-size:1.1rem; font-weight:900; color:#204158}
    .drawer-close{
      border:1px solid #fecaca; background:#fff; color:#7f1d1d; border-radius:10px; padding:6px 10px; cursor:pointer; font-weight:800;
    }
    .drawer-body{padding:16px; display:grid; gap:12px}
    .info-row{display:grid; grid-template-columns:96px 1fr; gap:10px; align-items:center}
    .info-label{color:#5a6c7d; font-weight:700}
    .logout-btn{
      margin-top:12px; padding:10px 14px; border:none; border-radius:12px; font-weight:800; cursor:pointer;
      background:linear-gradient(45deg, #ef4444, #b91c1c); color:#fff; box-shadow:0 8px 20px rgba(239,68,68,.25);
    }
    .logout-btn:hover{filter:brightness(1.03)}
    .drawer-foot{margin-top:auto; padding:12px 16px; border-top:1px solid var(--sky-200); color:#5a6c7d; font-size:.9rem}

    /* TÃ­tulos */
    .page-head{ margin:16px 0 6px; display:flex; align-items:end; gap:12px; flex-wrap:wrap }
    .page-head h1{ font-size:2.2rem; letter-spacing:.2px; color:#204158 }
    .sub{ color:var(--muted); font-size:1rem }

    /* Contenido */
    #gameListContainer{ min-height:180px; }
    .game-list{ display:flex; flex-direction:row; gap:16px; overflow-x:auto; padding:16px; scroll-snap-type:x mandatory; scroll-behavior:smooth; -webkit-overflow-scrolling:touch; width:100%; background: rgba(255,255,255,.65); border:2px dashed var(--sky-200); border-radius:18px; box-shadow: var(--shadow) }
    .game-list::-webkit-scrollbar { height:8px; }
    .game-list::-webkit-scrollbar-track { background:var(--sky-50); border-radius:8px; }
    .game-list::-webkit-scrollbar-thumb { background:var(--sky-400); border-radius:8px; }
    .game-item{ background:transparent; border:none; padding:12px; transition: transform .25s ease, box-shadow .25s ease; display:flex; flex-direction:row; align-items:center; gap:12px; min-width:400px; max-width:450px; scroll-snap-align:start; }
    .game-item:hover{transform: translateY(-4px); box-shadow: 0 8px 20px rgba(2,132,199,.2)}
    .game-item .avatar{ width:48px; height:48px; border-radius:12px; display:grid; place-items:center; background:linear-gradient(135deg, var(--sky-200), var(--sky-50)); border:1px solid var(--sky-300); font-size:1.4rem }
    .game-title{ font-weight:800; color:#204158; font-size:1rem; line-height:1.3 }
    .meta{ margin:0 12px 0 0; color:#5a6c7d; font-size:.9rem; display:flex; gap:8px; align-items:center }
    .badge{ padding:3px 8px; border-radius:999px; font-size:.75rem; font-weight:700; border:1px solid var(--sky-300); color:#0369a1; background:linear-gradient(180deg, var(--sky-100), var(--sky-50)); }
    .badge.live{border-color:#22c55e55; color:#166534; background:linear-gradient(180deg, #dcfce7, #f0fdf4)}
    .badge.warn{border-color:#f59e0b66; color:#92400e; background:linear-gradient(180deg, #fef3c7, #fffbeb)}
    .badge.blocked{border-color:#ef444444; color:#7f1d1d; background:linear-gradient(180deg, #fee2e2, #fff1f2)}
    .actions{ margin:0; display:flex; gap:8px; align-items:center }
    .block-button, .timer-button{ padding:8px 12px; border:none; cursor:pointer; border-radius:10px; font-weight:800; transition: transform .15s ease, box-shadow .3s ease, background .3s ease, opacity .2s ease; display:inline-flex; align-items:center; gap:6px; font-size:.9rem }
    .timer-button{ background:linear-gradient(45deg, #38bdf8, #0284c7); color:white; box-shadow: 0 6px 15px rgba(56,189,248,.4); }
    .timer-button:hover{box-shadow: 0 12px 25px rgba(56,189,248,.45); transform: translateY(-2px)}
    .block-button{ background:linear-gradient(45deg, #ef4444, #b91c1c); color:white; box-shadow: 0 6px 15px rgba(239,68,68,.35); }
    .block-button:hover{box-shadow: 0 12px 25px rgba(239,68,68,.45); transform: translateY(-2px)}
    .block-button.is-loading, .timer-button.is-loading{opacity:.75; transform:none; pointer-events:none}
    .game-item.is-blocked{outline:2px dashed #ef4444aa}
    .game-item .ribbon{ position:absolute; top:8px; right:-6px; padding:4px 10px; transform: rotate(2deg); background: #ef4444; color:#fff; font-weight:900; border-radius:6px; box-shadow: 0 6px 18px rgba(239,68,68,.4) }
    .empty{ text-align:center; padding:48px; border:2px dashed var(--sky-200); border-radius:18px; background: rgba(255,255,255,.65) }
    .spinner{ width:26px; height:26px; border-radius:999px; border:3px solid var(--sky-200); border-top-color: var(--sky-500); animation: spin .9s linear infinite; display:inline-block; vertical-align:middle; margin-right:8px }
    @keyframes spin{to{transform: rotate(360deg)}}

    /* Modal */
    .modal{ display:none; position:fixed; inset:0; z-index:1100; background:rgba(2,23,43,.45); backdrop-filter: blur(2px); }
    .modal.is-open{display:grid; place-items:center; animation: fadeIn .25s ease}
    @keyframes fadeIn{from{opacity:0}to{opacity:1}}
    .modal-content{ width:min(640px, 95vw); background: rgba(255,255,255,.9); border:1px solid var(--sky-200); border-radius:20px; padding:28px; box-shadow: 0 30px 80px rgba(3,105,161,.25); transform: scale(.98); animation: pop .2s ease forwards; text-align:left; }
    @keyframes pop{to{transform:scale(1)}}
    .modal-header{display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom:16px}
    .modal-title{font-size:1.5rem; font-weight:900; color:#204158}
    .modal-sub{color:#5a6c7d; margin-bottom:16px; font-size:1.1rem}
    .modal-grid{ display:grid; grid-template-columns:1fr 1fr; gap:16px; margin:16px 0 12px }
    .field{ background:#fff; border:2px solid var(--sky-200); border-radius:12px; padding:12px 14px; display:flex; align-items:center; gap:12px; transition: .25s ease; }
    .field:focus-within{border-color: var(--sky-400); box-shadow: 0 0 0 6px rgba(56,189,248,.12)}
    .field input{ width:100%; border:none; outline:none; font-size:1.2rem; font-weight:800; color:#0b4666 }
    .modal-actions{display:flex; justify-content:flex-end; gap:12px; margin-top:12px}
    .close-btn{ background:#fff; border:2px solid #fecaca; color:#7f1d1d; border-radius:12px; padding:12px 16px; cursor:pointer; font-weight:800; transition:.2s ease }
    .close-btn:hover{background:#ffe4e6}
    #confirmTimerBtn.timer-button{min-width:160px; padding:12px 16px}
    #cancelTimerBtn.close-btn{min-width:140px}

    :focus-visible{outline: 3px solid var(--sky-400); outline-offset: 2px}
    @media (prefers-color-scheme: dark){
      body{background:linear-gradient(135deg, #0b1722 0%, #0f2331 100%); color:#e8eef4}
      .game-list,.modal-content,.input,.field{background:#0f1f2b; border-color:#143447}
      header{background:rgba(7,19,28,.8)}
      .drawer{background:#0f1f2b; border-color:#143447}
      .drawer-head{border-color:#143447}
      .drawer-foot{border-color:#143447}
    }

    .hidden{display:none !important}
  </style>
</head>
<body>

<header>
  <nav class="container">
    <a class="logo" href="#">
      <img src="assets/safeplaylogo.png" alt="SafePlay Logo" style="width:150px;height:auto;"/>
    </a>

    <div class="nav-actions">
      <span class="chip">Estado: Online</span>

      <!-- BotÃ³n que abre la barra lateral -->
      <button id="accountBtn" class="account-btn" title="Cuenta">
        <span class="account-avatar">S</span>
        Cuenta
      </button>
    </div>
  </nav>
</header>

<!-- Drawer (barra lateral de sesiÃ³n) -->
<div id="drawerOverlay" class="drawer-overlay"></div>
<aside id="sessionDrawer" class="drawer" aria-hidden="true" aria-labelledby="drawerTitle" role="dialog">
  <div class="drawer-head">
    <h3 id="drawerTitle" class="drawer-title">SesiÃ³n de supervisor</h3>
    <button id="drawerClose" class="drawer-close" aria-label="Cerrar panel">Cerrar</button>
  </div>
  <div class="drawer-body">
    <div class="info-row">
      <div class="info-label">Nombre</div>
      <div id="infoName">â</div>
    </div>
    <div class="info-row">
      <div class="info-label">Correo</div>
      <div id="infoEmail">â</div>
    </div>
    <div class="info-row">
      <div class="info-label">Rol</div>
      <div id="infoRole">â</div>
    </div>

    <button id="logoutBtn" class="logout-btn">Cerrar sesiÃ³n</button>
  </div>
  <div class="drawer-foot">
    SafePlay â¢ Control parental para juegos
  </div>
</aside>

<main class="container">
  <div class="page-head">
    <h1>Monitor de Juegos</h1>
  </div>

  <div id="gameListContainer">
    <div class="empty">
      <span class="spinner"></span> Cargando juegosâ¦
    </div>
  </div>
</main>

<!-- Modal Timer (presente en HTML; si se borra, renderer lo crea) -->
<div id="timerModal" class="modal" aria-hidden="true" role="dialog" aria-labelledby="timerTitle">
  <div class="modal-content">
    <div class="modal-header">
      <h2 id="timerTitle" class="modal-title">â±ï¸ Establecer tiempo de juego</h2>
      <button id="cancelTimerBtn" class="close-btn" aria-label="Cerrar">Cerrar</button>
    </div>
    <p id="modalGameName" class="modal-sub">Selecciona horas y minutos de sesiÃ³n.</p>

    <div class="modal-grid">
      <label class="field" for="hoursInput">
        <span>ð</span>
        <input type="text" id="hoursInput" placeholder="Horas" maxlength="2" inputmode="numeric"/>
      </label>
      <label class="field" for="minutesInput">
        <span>â</span>
        <input type="text" id="minutesInput" placeholder="Minutos" maxlength="2" inputmode="numeric"/>
      </label>
    </div>

    <div class="modal-actions">
      <button id="confirmTimerBtn" class="timer-button">Aceptar</button>
    </div>
  </div>
</div>

<!-- Un solo script: toda la lÃ³gica vive en renderer.js -->
<script src="renderer.js"></script>
</body>
</html>
